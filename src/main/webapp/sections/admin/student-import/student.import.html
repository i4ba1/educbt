<div class="row-fluid col-xs-12">
  <h3 class="page-header">
    <i class="fa fa-fw fa-newspaper-o fa-lg"></i>Impor Data Siswa
    <span class="pull-right">
      <a target="_self" href="assets/csv-seed/student.template.csv" download="student.template.csv" title="Unduh Templet CSV Impor Siswa"><i class="fa fa-download"></i></a>
    </span>
  </h3>
  <table class="col-xs-12">
    <tr class="thumbnail">
      <td class="col-xs-4">Unggah CSV</td>
      <td class="col-xs-6 form-control">
        <ng-csv-import content="csv.content" header="csv.header" separator="csv.separator" result="csv.result" encoding="csv.encoding"></ng-csv-import>
      </td>
      <td class="col-xs-3">
        <div class="btn btn-primary" ng-click="updateData()" ng-disabled="csv.result == null">Unggah</div>
      </td>
    </tr>
  </table>
</div>

<div class="row-fluid col-xs-12 " ng-show="data != null">
  <table ng-table="studentTable" show-filter="true" class="table table-responsive table-striped ">
    <tr ng-repeat="student in data">
      <td data-title="'No'">
        {{$index+1+(studentTable.count()*(studentTable.page()-1))}}
      </td>
      <td data-title="'NIS'">
        {{student.nis}}
      </td>
      <td data-title="'Nama'">
        {{student.firstName+" "+student.lastName}}
      </td>
      <td data-title="'Tanggal Lahir'">
        {{student.birthPlace+", "+student.birthDate}}
      </td>
      <td data-title="'Alamat'">
        {{student.address}}
      </td>
      <td data-title="'Kelas'">
        {{student.kelas}}
      </td>
      <td data-title="'Telpon'">
        {{student.phone}}
      </td>
      <td data-title="'Telpon Genggam'">
        {{student.mobilePhone}}
      </td>
    </tr>
  </table>
</div>

<div class="row-fluid col-xs-12" ng-show="data != null">
  <form role="form" ng-submit="importStudent()">
    <div class="form-group">
      <div>
        <button class="btn btn-primary" type="submit">Simpan</button>
        <a ui-sref="admin" class="btn btn-default">Batal</a>
      </div>
    </div>
  </form>
</div>

<modal-spinner title="Proses Simpan" visible="showModalLoading"></modal-spinner>
